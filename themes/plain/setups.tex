% XML setups map ConTeXt commands to HTML elements.

\startxmlsetups xml:xhtml
  % Do not typeset the HTML document's header title element.
  \xmlsetsetup{\xmldocument}{*}{-}

  % Document elements
  \xmlsetsetup{\xmldocument}{html|body}{xml:*}

  % Header elements
  \xmlsetsetup{\xmldocument}{h1|h2|h3|h4|h5|h6}{xml:*}

  % Block elements
  \xmlsetsetup{\xmldocument}{p|q|blockquote|div}{xml:*}

  % List elements
  \xmlsetsetup{\xmldocument}{ul|ol|li|dl|dt|dd}{xml:*}

  % Break elements
  \xmlsetsetup{\xmldocument}{hr|br}{xml:*}

  % Inline elements
  \xmlsetsetup{\xmldocument}{span|em|b|strong|a|sup|sub|code|img}{xml:*}

  % TeX elements
  \xmlsetsetup{\xmldocument}{tex}{xml:*}
\stopxmlsetups

\startxmlsetups xml:html
  \xmlflush{#1}
\stopxmlsetups

\startxmlsetups xml:body
  \xmlflush{#1}
\stopxmlsetups

\startxmlsetups xml:h1
  \chapter{\xmlflush{#1}}
\stopxmlsetups

\startxmlsetups xml:h2
  \section{\xmlflush{#1}}
\stopxmlsetups

\startxmlsetups xml:h3
  \subsection{\xmlflush{#1}}
\stopxmlsetups

% Paragraphs are followed by a paragraph break.
\startxmlsetups xml:p
  \xmlflush{#1}\par
\stopxmlsetups

\startxmlsetups xml:ul
  \startitemize
    \xmlflush{#1}
  \stopitemize
\stopxmlsetups

\startxmlsetups xml:li
  \startitem \xmlflush{#1} \stopitem
\stopxmlsetups

% Requires the \href macro.
\startxmlsetups xml:a
  \href{\xmlflush{#1}}{\xmlatt{#1}{href}}
\stopxmlsetups

\startxmlsetups xml:tex
  \xmlflushcontext{#1}
\stopxmlsetups

% Emphasized text is italicized, typically.
\startxmlsetups xml:em
  \dontleavehmode{\em\xmlflush{#1}}
\stopxmlsetups

% Strong text is bolded, typically.
\startxmlsetups xml:strong
  \dontleavehmode{\bf\xmlflush{#1}}
\stopxmlsetups

\startxmlsetups xml:img
  \placefigure{}{%
    \externalfigure[\xmlatt{#1}{src}]
  }
\stopxmlsetups

\startxmlsetups xml:q
  \quotation{\xmlflush{#1}}
\stopxmlsetups

% Map arbitrary div classes, defined by fenced divs.
\startxmlsetups xml:div
  \start[\xmlatt{#1}{class}]
    \xmlflush{#1}
  \stop
\stopxmlsetups

\xmlregistersetup{xml:xhtml}

