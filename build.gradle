version = '0.5'

apply plugin: 'java'
apply plugin: 'java-library-distribution'
apply plugin: 'application'

sourceCompatibility = 1.8

mainClassName = 'com.scrivenvar.Main'

repositories {
	jcenter()
}

compileJava {
  options.compilerArgs << "-Xlint:unchecked" << "-Xlint:deprecation"
}

dependencies {
  compile group: 'org.fxmisc.richtext', name: 'richtextfx', version: '0.7-M2'
	compile group: 'com.miglayout', name: 'miglayout-javafx', version: '5.0'
	compile group: 'de.jensd', name: 'fontawesomefx-fontawesome', version: '4.5.0'
  compile group: 'org.ahocorasick', name: 'ahocorasick', version: '0.3.0'
  compile group: 'com.vladsch.flexmark', name: 'flexmark', version: '0.6.1'
  compile group: 'com.vladsch.flexmark', name: 'flexmark-ext-gfm-tables', version: '0.6.1'
  compile group: 'com.fasterxml.jackson.core', name: 'jackson-core', version: '2.8.4'
  compile group: 'com.fasterxml.jackson.core', name: 'jackson-databind', version: '2.8.4'
  compile group: 'com.fasterxml.jackson.core', name: 'jackson-annotations', version: '2.8.4'
  compile group: 'com.fasterxml.jackson.dataformat', name: 'jackson-dataformat-yaml', version: '2.8.4'
  compile group: 'org.yaml', name: 'snakeyaml', version: '1.17'
  compile group: 'com.googlecode.juniversalchardet', name: 'juniversalchardet', version: '1.0.3'
  compile group: 'commons-configuration', name: 'commons-configuration', version: '1.10'
}

jar {
	baseName = 'scrivenvar'
  
  from {
    (configurations.runtime).collect {
      it.isDirectory() ? it : zipTree(it)
    }
  }
    
	manifest {
		attributes 'Main-Class': mainClassName,
					'Class-Path': configurations.compile.collect { 'lib/' + it.getName() }.join(' ')
	}
}

distributions {
	main {
		baseName = 'scrivenvar'
		contents {
			from { ['LICENSE', 'README.md'] }
			into( 'images' ) {
				from { 'images' }
			}
		}
	}
}
