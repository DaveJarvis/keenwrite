% XML setups map ConTeXt commands to HTML elements.

\startxmlsetups xml:xhtml
  % Do not typeset the HTML document's header title element.
  \xmlsetsetup{\xmldocument}{*}{-}

  % Only elements included in this list are typeset.
  \xmlsetsetup{\xmldocument}{%
    html|body|div|h1|h2|h3|h4|h5|h6|p|blockquote|span|em|q|b|strong|%
    a|ul|ol|li|dl|dt|dd|hr|br|sup|sub|code|img%
  }{xml:*}
\stopxmlsetups


\startxmlsetups xml:html
  \xmlflush{#1}
\stopxmlsetups

\startxmlsetups xml:body
  \xmlflush{#1}
\stopxmlsetups

\startxmlsetups xml:h1
  \chapter{\xmlflush{#1}}
\stopxmlsetups

\startxmlsetups xml:h2
  \section{\xmlflush{#1}}
\stopxmlsetups

\startxmlsetups xml:h3
  \subsection{\xmlflush{#1}}
\stopxmlsetups

% Paragraphs are followed by a paragraph break.
\startxmlsetups xml:p
  \xmlflush{#1}\par
\stopxmlsetups

% Emphasized text is italicized, typically.
\startxmlsetups xml:em
  \dontleavehmode{\em\xmlflush{#1}}
\stopxmlsetups

% Strong text is bolded, typically.
\startxmlsetups xml:strong
  \dontleavehmode{\bf\xmlflush{#1}}
\stopxmlsetups

\startxmlsetups xml:img
  \starttexcode
    \placefigure{}{%
      \externalfigure[\xmlatt{#1}{src}][conversion=mp]%
    }
  \stoptexcode
\stopxmlsetups

\startxmlsetups xml:q
  \quotation{\xmlflush{#1}}
\stopxmlsetups

% Map arbitrary div classes, defined by fenced divs.
\startxmlsetups xml:div
  \start[\xmlatt{#1}{class}]
    \xmlflush{#1}
  \stop
\stopxmlsetups

\xmlregistersetup{xml:xhtml}

